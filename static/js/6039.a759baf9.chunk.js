"use strict";(self.webpackChunkmmsp_tbm=self.webpackChunkmmsp_tbm||[]).push([[6039],{74509:(t,e,n)=>{n.d(e,{Jn:()=>s,LR:()=>E,Ou:()=>d,RL:()=>c,Uy:()=>b,VW:()=>r,W_:()=>g,Wb:()=>_,jG:()=>M,kf:()=>y,mF:()=>l,tR:()=>x,tq:()=>m,vQ:()=>p,vu:()=>u,zx:()=>v});var i=n(88152);function o(t){return t?M:x}function a(t,e){return null!==e&&void 0!==e&&e.mode?e.mode:o(t).mode}function l(t,e){return null!=e?e:o(t)}function r(t,e){return a(null!=t&&t.hasZ,e)}function s(t,e){return l(null!=t&&!!t.hasZ,e)}function u(t){const e=h(t);return r(t.geometry,e)}function c(t){var e,n;const o=h(t),a=r(t.geometry,o);return{mode:a,offset:null!=o&&"on-the-ground"!==a?(null!==(e=o.offset)&&void 0!==e?e:0)*(0,i.Z7)(null!==(n=o.unit)&&void 0!==n?n:"meters"):0}}function h(t){return t.layer&&"elevationInfo"in t.layer?t.layer.elevationInfo:null}function d(t,e,n){var i,o;if(null===n||void 0===n||!n.mode)return;const a=t.hasZ?t.z:0,l=null!=n.offset?n.offset:0;switch(n.mode){case"absolute-height":return a-l;case"on-the-ground":return 0;case"relative-to-ground":return a-((null!==(i=e.elevationProvider.getElevation(t.x,t.y,a,t.spatialReference,"ground"))&&void 0!==i?i:0)+l);case"relative-to-scene":return a-((null!==(o=e.elevationProvider.getElevation(t.x,t.y,a,t.spatialReference,"scene"))&&void 0!==o?o:0)+l)}}function p(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return f(t,e.x,e.y,e.hasZ?e.z:0,e.spatialReference,n,i)}function v(t,e,n,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return f(t,e[0],e[1],e.length>2?e[2]:0,n,i,o)}function f(t,e,n,i,o,a){let l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(null==a)return;const r=null!=l?l.mode:"absolute-height";if("on-the-ground"===r)return 0;const{absoluteZ:s}=m(e,n,i,o,t,a);return function(t,e,n,i,o,a,l,r){var s,u;const c=null!=(null===l||void 0===l?void 0:l.offset)?l.offset:0;switch(r){case"absolute-height":return t-c;case"relative-to-ground":return t-((null!==(s=a.elevationProvider.getElevation(e,n,i,o,"ground"))&&void 0!==s?s:0)+c);case"relative-to-scene":return t-((null!==(u=a.elevationProvider.getElevation(e,n,i,o,"scene"))&&void 0!==u?u:0)+c)}}(s,e,n,i,o,t,l,r)}function m(t,e,n,i,o,a){const l=null!=a.offset?a.offset:0;switch(a.mode){case"absolute-height":return{absoluteZ:n+l,elevation:0};case"on-the-ground":{var r;const n=null!==(r=o.elevationProvider.getElevation(t,e,0,i,"ground"))&&void 0!==r?r:0;return{absoluteZ:n,elevation:n}}case"relative-to-ground":{var s;const a=null!==(s=o.elevationProvider.getElevation(t,e,n,i,"ground"))&&void 0!==s?s:0;return{absoluteZ:n+a+l,elevation:a}}case"relative-to-scene":{var u;const a=null!==(u=o.elevationProvider.getElevation(t,e,n,i,"scene"))&&void 0!==u?u:0;return{absoluteZ:n+a+l,elevation:a}}}}function g(t,e){if(null==e)return!1;const{mode:n}=e;return null!=n&&("scene"===t&&"relative-to-scene"===n||"ground"===t&&"absolute-height"!==n)}function b(t,e,n){return n&&n.mode!==e?"".concat(t," only support ").concat(e," elevation mode"):null}function _(t,e,n){return(null===n||void 0===n?void 0:n.mode)===e?"".concat(t," do not support ").concat(e," elevation mode"):null}function y(t,e){return null!=(null===e||void 0===e?void 0:e.featureExpressionInfo)&&"0"!==e.featureExpressionInfo.expression?"".concat(t," do not support featureExpressionInfo"):null}function E(t,e){e&&t.warn(".elevationInfo=",e)}const M={mode:"absolute-height",offset:0},x={mode:"on-the-ground",offset:null}},45900:(t,e,n)=>{n.d(e,{m:()=>h});var i=n(27366),o=n(7138),a=n(32718),l=n(66978),r=n(49861),s=(n(25243),n(63780),n(93169),n(69912)),u=n(99034),c=n(92853);let h=class extends o.Z{constructor(t){super(t),this.manipulators=new c.D,this.automaticManipulatorSelection=!0,this.hasGrabbedManipulators=!1,this.hasHoveredManipulators=!1,this.firstGrabbedManipulator=null,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[u.bH.MANAGER,!0],[u.bH.USER,!0]]),this._creationFinishedResolver=(0,l.hh)()}get active(){return null!=this.view&&this.view.activeTool===this}set visible(t){this._get("visible")!==t&&(this._set("visible",t),this._syncVisible())}get editable(){return this.getEditableFlag(u.bH.USER)}set editable(t){this.setEditableFlag(u.bH.USER,t)}get updating(){return!1}get cursor(){return null}get hasFocusedManipulators(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){null!=this.view?(this.view.focus(),this.onActivate()):a.Z.getLogger(this).error("Can't activate tool if view is not defined.")}deactivate(){this.onDeactivate()}handleInputEvent(t){this.onInputEvent(t)}handleInputEventAfter(t){this.onInputEventAfter(t)}setEditableFlag(t,e){this._editableFlags.set(t,e),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),t===u.bH.USER&&this.notifyChange("editable"),this.onEditableChange(),this.onManipulatorSelectionChanged()}getEditableFlag(t){var e;return null!==(e=this._editableFlags.get(t))&&void 0!==e&&e}whenCreated(){return this._creationFinishedResolver.promise}onManipulatorSelectionChanged(){}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(t){}onInputEventAfter(t){}get internallyEditable(){return this.getEditableFlag(u.bH.USER)&&this.getEditableFlag(u.bH.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.initialized)if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};(0,i._)([(0,r.Cb)({constructOnly:!0})],h.prototype,"view",void 0),(0,i._)([(0,r.Cb)({readOnly:!0})],h.prototype,"active",null),(0,i._)([(0,r.Cb)({value:!0})],h.prototype,"visible",null),(0,i._)([(0,r.Cb)({value:!0})],h.prototype,"editable",null),(0,i._)([(0,r.Cb)({readOnly:!0})],h.prototype,"manipulators",void 0),(0,i._)([(0,r.Cb)({readOnly:!0})],h.prototype,"updating",null),(0,i._)([(0,r.Cb)()],h.prototype,"cursor",null),(0,i._)([(0,r.Cb)({readOnly:!0})],h.prototype,"automaticManipulatorSelection",void 0),(0,i._)([(0,r.Cb)()],h.prototype,"hasFocusedManipulators",null),(0,i._)([(0,r.Cb)()],h.prototype,"hasGrabbedManipulators",void 0),(0,i._)([(0,r.Cb)()],h.prototype,"hasHoveredManipulators",void 0),(0,i._)([(0,r.Cb)()],h.prototype,"firstGrabbedManipulator",void 0),(0,i._)([(0,r.Cb)({readOnly:!0})],h.prototype,"created",void 0),(0,i._)([(0,r.Cb)({readOnly:!0})],h.prototype,"removeIncompleteOnCancel",void 0),h=(0,i._)([(0,s.j)("esri.views.interactive.InteractiveToolBase")],h)},92853:(t,e,n)=>{n.d(e,{D:()=>a});var i,o=n(80987);!function(t){t[t.WhenToolEditable=0]="WhenToolEditable",t[t.WhenToolNotEditable=1]="WhenToolNotEditable",t[t.Always=2]="Always"}(i||(i={}));class a{constructor(){this._isToolEditable=!0,this._manipulators=new o.Z,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(t){this._isToolEditable=t}get length(){return this._manipulators.length}add(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.WhenToolEditable;this.addMany([t],e)}addMany(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.WhenToolEditable;for(const n of t){const t={manipulator:n,visibilityPredicate:e,attached:!1};this._manipulators.add(t),this._attached&&this._updateManipulatorAttachment(t)}}remove(t){for(let e=0;e<this._manipulators.length;e++)if(this._manipulators.at(e).manipulator===t){const t=this._manipulators.splice(e,1)[0];this._detachManipulator(t);break}}removeAll(){this._manipulators.forEach((t=>{this._detachManipulator(t)})),this._manipulators.removeAll()}attach(){this._manipulators.forEach((t=>{this._updateManipulatorAttachment(t)})),this._attached=!0}detach(){this._manipulators.forEach((t=>{this._detachManipulator(t)})),this._attached=!1}destroy(){this.detach(),this._manipulators.forEach((t=>{let{manipulator:e}=t;return e.destroy()})),this._manipulators.destroy(),this._resourceContexts=null}on(t,e){return this._manipulators.on(t,(t=>{e(t)}))}forEach(t){for(const e of this._manipulators.items)t(e)}some(t){return this._manipulators.items.some(t)}toArray(){const t=[];return this.forEach((e=>t.push(e.manipulator))),t}intersect(t,e){let n=null,i=Number.MAX_VALUE;return this._manipulators.forEach((o=>{let{manipulator:a,attached:l}=o;if(!l||!a.interactive)return;const r=a.intersectionDistance(t,e);null!=r&&r<i&&(i=r,n=a)})),n}_updateManipulatorAttachment(t){this._isManipulatorItemVisible(t)?this._attachManipulator(t):this._detachManipulator(t)}_attachManipulator(t){t.attached||(t.manipulator.attach&&t.manipulator.attach(this._resourceContexts),t.attached=!0)}_detachManipulator(t){if(!t.attached)return;const e=t.manipulator;e.grabbing=!1,e.dragging=!1,e.hovering=!1,e.selected=!1,e.detach&&e.detach(this._resourceContexts),t.attached=!1}_isManipulatorItemVisible(t){return t.visibilityPredicate===i.Always||(this._isToolEditable?t.visibilityPredicate===i.WhenToolEditable:t.visibilityPredicate===i.WhenToolNotEditable)}}},5693:(t,e,n)=>{n.d(e,{hM:()=>y,Xd:()=>v,a9:()=>f,di:()=>b,BS:()=>E,Cf:()=>g});n(59486),n(63780),n(93169);var i=n(84652),o=(n(16889),n(71353),n(79803)),a=n(37818),l=n(67331),r=n(74509),s=n(50951),u=(n(65156),n(376),n(69662));function c(t,e,n,i){var o,a;if(null==i||t.hasZ||(i=void 0),"point"===t.type)return t.x+=e,t.y+=n,t.hasZ&&null!=i&&(t.z+=i),t;if("multipoint"===t.type){const o=t.points;for(let t=0;t<o.length;t++)o[t]=h(o[t],e,n,i);return t}if("extent"===t.type)return t.xmin+=e,t.xmax+=e,t.ymin+=n,t.ymax+=n,null!=i&&(null!==(o=t.zmin)&&void 0!==o||(t.zmin=0),t.zmin+=i,null!==(a=t.zmax)&&void 0!==a||(t.zmax=0),t.zmax+=i),t;const l=(0,u.nA)(t),r="polyline"===t.type?t.paths:t.rings;for(let s=0;s<l.length;s++){const t=l[s];for(let o=0;o<t.length;o++)t[o]=h(t[o],e,n,i)}return"paths"in t?t.paths=r:t.rings=r,t}function h(t,e,n,i){return d(t,t[0]+e,t[1]+n,null!=t[2]&&null!=i?t[2]+i:void 0)}function d(t,e,n,i){const o=[e,n];return t.length>2&&o.push(null!=i?i:t[2]),t.length>3&&o.push(t[3]),o}var p=n(585);function v(t,e){return t.events.on("drag",function(t,e){let n=null,i=null;return o=>{if("cancel"===o.action)return void(null!=i&&(i.execute({action:"cancel"}),n=null,i=null));const a={action:o.action,screenStart:o.start,screenEnd:o.screenPoint};"start"===o.action&&null==n&&(n=new y,i=new y,e(t,n,i,o.pointerType,a)),null!=n&&n.execute(a),"end"===o.action&&null!=n&&(n=null,i=null)}}(t,e))}function f(t,e){let n=null;return i=>{if("start"===i.action&&(n=function(t,e,n){const i=t.geometry,r=(0,a.D)(e);if(null==i)return null;if("mesh"===i.type)return function(t,e,n,i){if(e.vertexSpace.isRelative)return function(t,e,n,i){const a=m(n.getOriginPoint(e.spatialReference),i),r=e.spatialReference;return null==a?null:{move:(e,i,s,u)=>{const h=c(a.clone(),e,i,s);if(h.spatialReference.equals(r))n.setOriginFromPoint(h);else{const t=(0,o.project)(h,r);null!=t&&n.setOriginFromPoint(t)}if(n.isGeoreferenced)t.notifyGeometryChanged();else{const e="end"===u;t.notifyMeshTransformChanged(e?{action:l.u.UpdateFastLocalOrigin}:{})}}}}(t,e,e.vertexSpace,n);if(!e.spatialReference.equals(n))return null;let a=0,r=0,u=0;return{move:(n,o,l)=>{const c=n-a,h=o-r,d=l-u;if(c||h||d){var v;const f=new p.Z(e.origin.x+c,e.origin.y+h,(null!==(v=e.origin.z)&&void 0!==v?v:0)+d,e.origin.spatialReference);e.centerAt(f,{geographic:e.vertexSpace.isRelative?void 0:i===s.JY.Global}),t.notifyGeometryChanged(),a=n,r=o,u=l}}}}(t,i,r,n);const u=m(i,r),h=i.spatialReference;return null==u?null:{move:(e,n,i)=>{const a=c(u.clone(),e,n,i);a.spatialReference.equals(h)?t.geometry=a:t.geometry=(0,o.project)(a,h)}}}(t,i.mapStart.spatialReference,e)),null==n)return null;const r=i.mapEnd.x-i.mapStart.x,u=i.mapEnd.y-i.mapStart.y,h=i.mapEnd.z-i.mapStart.z;return n.move(r,u,h,i.action),{...i,translationX:r,translationY:u,translationZ:h}}}function m(t,e){return null==t?null:t.spatialReference.equals(e)?t.clone():(0,o.project)(t,e)}function g(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0,a=null;const l=null==n||null!==(e=t.spatialReference)&&void 0!==e&&e.equals(n)?t=>t:t=>null!=t?(0,o.project)(t,n):t,r={exclude:[],...i};return e=>{if("start"===e.action&&(a=l(t.toMap(e.screenStart,r))),null==a)return null;const n=l(t.toMap(e.screenEnd,r));return null!=n?{...e,mapStart:a,mapEnd:n}:null}}function b(t,e){const n=new Map;for(const o of e)n.set(o,(0,i.d9)(t[o]));return e=>(n.forEach(((e,n)=>{t[n]=e})),e)}const _=()=>{};class y{constructor(){this.execute=_}next(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new y;return null!=t&&(this.execute=n=>{const i=t(n);null!=i&&e.execute(i)}),e}}function E(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if("2d"===t.type)return t=>t;let i=null;return o=>{"start"===o.action&&(i=t.toMap(o.screenStart,{exclude:n}),null!=i&&(i.z=(0,r.Ou)(i,t,e)));const a=t.toMap(o.screenEnd,{exclude:n});null!=a&&(a.z=(0,r.Ou)(a,t,e));const l=null!=i&&null!=a?{sceneStart:i,sceneEnd:a}:null;return{...o,scenePoints:l}}}}}]);
//# sourceMappingURL=6039.a759baf9.chunk.js.map